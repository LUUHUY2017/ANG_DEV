{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{pIHe:function(e,l,n){\"use strict\";n.r(l);var t=n(\"CcnG\"),o=function(){},a=n(\"pMnS\"),i=n(\"bAca\"),r=n(\"VyMO\"),u=n(\"Sqib\"),s=n(\"CmeN\"),d=n(\"gIcY\"),c=n(\"aP8s\"),p=n(\"mrSG\"),m=n(\"AytR\"),g=n(\"UEr7\"),_=n(\"6n/F\"),h=n.n(_),v=n(\"M8aS\"),f=n.n(v),b=n(\"/fEY\"),w=n.n(b),C=n(\"/d2E\"),y=n.n(C);f()(h.a),w()(h.a),y()(h.a);var x=function(){function e(e,l){this.router=e,this.appservice=l,this.start_time=8,this.end_time=22,this.startTime=[this.start_time.toString()],this.endTime=[this.end_time.toString()],this.btnApplyValid=!1,this.dropdownselect=[{label:\"Visits\",value:\"Visits\"},{label:\"Traffic flow\",value:\"Traffic flow\"}]}return e.prototype.ngOnInit=function(){var e=this;this.get_data(),this.appservice.get_start_time().subscribe(function(l){e.startTimeOption=l},function(e){console.log(e)}),this.appservice.get_end_time().subscribe(function(l){e.endTimeOption=l},function(e){console.log(e)})},e.prototype.heat_map=function(){h.a.chart(this.container.nativeElement,{chart:{type:\"heatmap\",marginTop:40,marginBottom:80,plotBorderWidth:1},title:{text:\"Sales per employee per weekday\"},xAxis:{categories:[\"Alexander\",\"Marie\",\"Maximilian\",\"Sophia\",\"Lukas\",\"Maria\",\"Leon\",\"Anna\",\"Tim\",\"Laura\"]},yAxis:{categories:[\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\"],title:null},colorAxis:{min:0,minColor:\"#FFFFFF\",maxColor:h.a.getOptions().colors[0]},legend:{align:\"right\",layout:\"vertical\",margin:0,verticalAlign:\"top\",y:25,symbolHeight:280},tooltip:{formatter:function(){return\"<b>\"+this.series.xAxis.categories[this.point.x]+\"</b> sold <br><b>\"+this.point.value+\"</b> items on <br><b>\"+this.series.yAxis.categories[this.point.y]+\"</b>\"}},series:[{name:\"Sales per employee\",borderWidth:1,data:[[0,0,10],[0,1,19],[0,2,8],[0,3,24],[0,4,67],[1,0,92],[1,1,58],[1,2,78],[1,3,117],[1,4,48],[2,0,35],[2,1,15],[2,2,123],[2,3,64],[2,4,52],[3,0,72],[3,1,132],[3,2,114],[3,3,19],[3,4,16],[4,0,38],[4,1,5],[4,2,8],[4,3,117],[4,4,115],[5,0,88],[5,1,32],[5,2,12],[5,3,6],[5,4,120],[6,0,13],[6,1,44],[6,2,88],[6,3,98],[6,4,96],[7,0,31],[7,1,1],[7,2,82],[7,3,32],[7,4,30],[8,0,85],[8,1,97],[8,2,123],[8,3,64],[8,4,84],[9,0,47],[9,1,114],[9,2,31],[9,3,48],[9,4,91]],dataLabels:{enabled:!0,color:\"#000000\"}}]})},e.prototype.tree_map_with_color_axis=function(){h.a.chart(this.container.nativeElement,{colorAxis:{minColor:\"#FFFFFF\",maxColor:h.a.getOptions().colors[0]},series:[{type:\"treemap\",layoutAlgorithm:\"squarified\",data:[{name:\"A\",value:6,colorValue:1},{name:\"B\",value:6,colorValue:2},{name:\"C\",value:4,colorValue:3},{name:\"D\",value:3,colorValue:4},{name:\"E\",value:2,colorValue:5},{name:\"F\",value:2,colorValue:6},{name:\"G\",value:1,colorValue:7}]}],title:{text:\"Highcharts Treemap\"}})},e.prototype.tree_map_with_levels=function(){h.a.chart(this.container.nativeElement,{series:[{type:\"treemap\",layoutAlgorithm:\"stripes\",alternateStartingDirection:!0,levels:[{level:1,layoutAlgorithm:\"sliceAndDice\",dataLabels:{enabled:!0,align:\"left\",verticalAlign:\"top\",style:{fontSize:\"15px\",fontWeight:\"bold\"}}}],data:[{id:\"A\",name:\"Apples\",color:\"#EC2500\"},{id:\"B\",name:\"Bananas\",color:\"#ECE100\"},{id:\"O\",name:\"Oranges\",color:\"#EC9800\"},{name:\"Anne\",parent:\"A\",value:5},{name:\"Rick\",parent:\"A\",value:3},{name:\"Peter\",parent:\"A\",value:4},{name:\"Anne\",parent:\"B\",value:4},{name:\"Rick\",parent:\"B\",value:10},{name:\"Peter\",parent:\"B\",value:1},{name:\"Anne\",parent:\"O\",value:1},{name:\"Rick\",parent:\"O\",value:3},{name:\"Peter\",parent:\"O\",value:3},{name:\"Susanne\",parent:\"Kiwi\",value:2,color:\"#9EDE00\"}]}],title:{text:\"Fruit consumption\"}})},e.prototype.large_tree_map=function(){var e=this,l={organization_id:Number(localStorage.getItem(\"organization_id\")),site_id:Number(JSON.parse(localStorage.getItem(\"site_selected\")).id),start_time:this.start_time,end_time:this.end_time,start_date:this.convert_date_tostring(localStorage.getItem(\"input_start_date\")),end_date:this.convert_date_tostring(localStorage.getItem(\"input_end_date\")),index_source:localStorage.getItem(\"footfall_heatmap_index_source\")?localStorage.getItem(\"footfall_heatmap_index_source\"):\"Visits\"};console.log(\"re_data\",l),this.appservice.post(l,m.a.API.sp_footfall_heatmap_poc_data_in_out_sum).subscribe(function(l){console.log(\"data: \",l);var n,t,o,a,i,r,u,s,d,c=[],p=0,m={Vivits:\"Vivits\",\"Traffic flow\":\"Traffic flow\"};for(u in l)if(l.hasOwnProperty(u)){for(s in t=0,n={id:\"id_\"+p,name:u,color:h.a.getOptions().colors[p]},a=0,l[u])if(l[u].hasOwnProperty(s)){for(d in c.push(o={id:n.id+\"_\"+a,name:s,parent:n.id}),r=0,l[u][s])l[u][s].hasOwnProperty(d)&&(t+=(i={id:o.id+\"_\"+r,name:m[d],parent:o.id,value:Math.round(+l[u][s][d])}).value,c.push(i),r+=1);a+=1}n.value=Math.round(t),c.push(n),p+=1}console.log(\"points\",c),h.a.chart(e.container.nativeElement,{series:[{type:\"treemap\",layoutAlgorithm:\"squarified\",allowDrillToNode:!0,animationLimit:1e3,dataLabels:{enabled:!1},levelIsConstant:!1,levels:[{level:1,dataLabels:{enabled:!0},borderWidth:3}],data:c}],title:{text:\"\"}})},function(e){console.log(e)},function(){e.blockUI.stop()})},e.prototype.selectedStartTime=function(e){this.start_time=e.value},e.prototype.selectedEndTime=function(e){this.end_time=e.value},e.prototype.convert_date_tostring=function(e){var l,n=Number(e);return'\"'+(l=n<1?new Date:new Date(n)).getFullYear()+\"-\"+(l.getMonth()+1)+\"-\"+l.getDate()+' 00:00:00.000\"'},e.prototype.export_excel=function(){this.tree_map_with_color_axis()},e.prototype.get_data=function(){localStorage.setItem(\"site_selected\",localStorage.getItem(\"site_selected_temp\")),localStorage.setItem(\"input_start_date\",document.getElementById(\"startDateReportTemp\").value),localStorage.setItem(\"input_end_date\",document.getElementById(\"endDateReportTemp\").value),localStorage.getItem(\"site_selected\")&&localStorage.getItem(\"input_start_date\")&&localStorage.getItem(\"input_end_date\")?(this.blockUI.start(\"\\u0110ang t\\u1ea3i d\\u1eef li\\u1ec7u...\"),this.large_tree_map(),console.log(\"trong if get_data\")):console.log(\"trong else get_data\")},e.prototype.change_index=function(e){console.log(e),localStorage.setItem(\"footfall_heatmap_index_source\",e.label),this.get_data()},Object(p.__decorate)([Object(g.BlockUI)(),Object(p.__metadata)(\"design:type\",Object)],e.prototype,\"blockUI\",void 0),e}(),S=n(\"ZYCi\"),I=n(\"F5nt\"),k=t[\"\\u0275crt\"]({encapsulation:0,styles:[[\".button[_ngcontent-%COMP%]{margin-left:460px;margin-top:-20px;margin-bottom:5px;width:50px;height:25px;border:0;font-size:9px;font-family:Arial;float:left;text-align:center}.buttonchiase[_ngcontent-%COMP%]{margin-left:2px;width:50px;height:25px;border:0;font-size:9px;float:right}.buttonxuat[_ngcontent-%COMP%]{margin-left:40px;width:50px;height:25px;border:0;font-size:9px;float:right}.buttonapdung[_ngcontent-%COMP%]{margin-left:2px;width:60px;height:25px;border:0;font-size:9px;float:right}.drselect[_ngcontent-%COMP%]{width:50%}\"]],data:{}});function A(e){return t[\"\\u0275vid\"](0,[t[\"\\u0275qud\"](402653184,1,{container:0}),(e()(),t[\"\\u0275eld\"](1,0,null,null,36,\"div\",[[\"class\",\"animated fadeIn\"]],null,null,null,null,null)),(e()(),t[\"\\u0275eld\"](2,0,null,null,1,\"block-ui\",[],null,null,null,i.c,i.b)),t[\"\\u0275did\"](3,114688,null,0,r.BlockUIComponent,[u.BlockUIInstanceService],null,null),(e()(),t[\"\\u0275eld\"](4,0,null,null,33,\"div\",[[\"class\",\"card\"]],null,null,null,null,null)),(e()(),t[\"\\u0275eld\"](5,0,null,null,29,\"div\",[[\"class\",\"card-header\"]],null,null,null,null,null)),(e()(),t[\"\\u0275eld\"](6,0,null,null,28,\"div\",[[\"class\",\"row\"]],null,null,null,null,null)),(e()(),t[\"\\u0275eld\"](7,0,null,null,4,\"div\",[[\"class\",\"col-sm-5\"]],null,null,null,null,null)),(e()(),t[\"\\u0275eld\"](8,0,null,null,3,\"ng-select\",[[\"class\",\"bootstrap drselect \"],[\"placeholder\",\"Visits\"]],null,[[null,\"selected\"],[\"window\",\"blur\"],[\"window\",\"click\"],[\"window\",\"resize\"]],function(e,l,n){var o=!0,a=e.component;return\"window:blur\"===l&&(o=!1!==t[\"\\u0275nov\"](e,10).onWindowBlur()&&o),\"window:click\"===l&&(o=!1!==t[\"\\u0275nov\"](e,10).onWindowClick()&&o),\"window:resize\"===l&&(o=!1!==t[\"\\u0275nov\"](e,10).onWindowResize()&&o),\"selected\"===l&&(o=!1!==a.change_index(n)&&o),o},s.b,s.a)),t[\"\\u0275prd\"](5120,null,d.NG_VALUE_ACCESSOR,function(e){return[e]},[c.a]),t[\"\\u0275did\"](10,4833280,null,1,c.a,[t.ElementRef],{options:[0,\"options\"],allowClear:[1,\"allowClear\"],placeholder:[2,\"placeholder\"]},{selected:\"selected\"}),t[\"\\u0275qud\"](335544320,2,{optionTemplate:0}),(e()(),t[\"\\u0275eld\"](12,0,null,null,22,\"div\",[[\"class\",\" col-sm-7 d-none d-md-block \"]],null,null,null,null,null)),(e()(),t[\"\\u0275eld\"](13,0,null,null,1,\"button\",[[\"class\",\"btn btn-primary float-right buttonchiase\"],[\"type\",\"button\"]],null,null,null,null,null)),(e()(),t[\"\\u0275ted\"](-1,null,[\" Chia S\\u1ebb \"])),(e()(),t[\"\\u0275eld\"](15,0,null,null,1,\"button\",[[\"class\",\"btn btn-primary float-right buttonxuat\"],[\"type\",\"button\"]],null,[[null,\"click\"]],function(e,l,n){var t=!0;return\"click\"===l&&(t=!1!==e.component.export_excel()&&t),t},null,null)),(e()(),t[\"\\u0275ted\"](-1,null,[\" Xu\\u1ea5t \"])),(e()(),t[\"\\u0275eld\"](17,0,null,null,1,\"button\",[[\"class\",\"btn btn-primary float-right buttonapdung\"],[\"type\",\"button\"]],[[8,\"disabled\",0]],[[null,\"click\"]],function(e,l,n){var t=!0;return\"click\"===l&&(t=!1!==e.component.get_data()&&t),t},null,null)),(e()(),t[\"\\u0275ted\"](-1,null,[\" \\xc1p d\\u1ee5ng \"])),(e()(),t[\"\\u0275eld\"](19,0,null,null,15,\"div\",[[\"class\",\"btn-group btn-group-toggle float-right mr-3\"],[\"data-toggle\",\"buttons\"]],null,null,null,null,null)),(e()(),t[\"\\u0275eld\"](20,0,null,null,6,\"ng-select\",[[\"class\",\"bootstrap\"],[\"style\",\"width: 80px\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"selected\"],[\"window\",\"blur\"],[\"window\",\"click\"],[\"window\",\"resize\"]],function(e,l,n){var o=!0,a=e.component;return\"window:blur\"===l&&(o=!1!==t[\"\\u0275nov\"](e,21).onWindowBlur()&&o),\"window:click\"===l&&(o=!1!==t[\"\\u0275nov\"](e,21).onWindowClick()&&o),\"window:resize\"===l&&(o=!1!==t[\"\\u0275nov\"](e,21).onWindowResize()&&o),\"ngModelChange\"===l&&(o=!1!==(a.startTime=n)&&o),\"selected\"===l&&(o=!1!==a.selectedStartTime(n)&&o),o},s.b,s.a)),t[\"\\u0275did\"](21,4833280,null,1,c.a,[t.ElementRef],{options:[0,\"options\"],allowClear:[1,\"allowClear\"]},{selected:\"selected\"}),t[\"\\u0275qud\"](335544320,3,{optionTemplate:0}),t[\"\\u0275prd\"](1024,null,d.NG_VALUE_ACCESSOR,function(e){return[e]},[c.a]),t[\"\\u0275did\"](24,671744,null,0,d.NgModel,[[8,null],[8,null],[8,null],[6,d.NG_VALUE_ACCESSOR]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),t[\"\\u0275prd\"](2048,null,d.NgControl,null,[d.NgModel]),t[\"\\u0275did\"](26,16384,null,0,d.NgControlStatus,[[4,d.NgControl]],null,null),(e()(),t[\"\\u0275ted\"](-1,null,[\" - \"])),(e()(),t[\"\\u0275eld\"](28,0,null,null,6,\"ng-select\",[[\"class\",\"bootstrap\"],[\"style\",\"width: 80px\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"selected\"],[\"window\",\"blur\"],[\"window\",\"click\"],[\"window\",\"resize\"]],function(e,l,n){var o=!0,a=e.component;return\"window:blur\"===l&&(o=!1!==t[\"\\u0275nov\"](e,29).onWindowBlur()&&o),\"window:click\"===l&&(o=!1!==t[\"\\u0275nov\"](e,29).onWindowClick()&&o),\"window:resize\"===l&&(o=!1!==t[\"\\u0275nov\"](e,29).onWindowResize()&&o),\"ngModelChange\"===l&&(o=!1!==(a.endTime=n)&&o),\"selected\"===l&&(o=!1!==a.selectedEndTime(n)&&o),o},s.b,s.a)),t[\"\\u0275did\"](29,4833280,null,1,c.a,[t.ElementRef],{options:[0,\"options\"],allowClear:[1,\"allowClear\"]},{selected:\"selected\"}),t[\"\\u0275qud\"](335544320,4,{optionTemplate:0}),t[\"\\u0275prd\"](1024,null,d.NG_VALUE_ACCESSOR,function(e){return[e]},[c.a]),t[\"\\u0275did\"](32,671744,null,0,d.NgModel,[[8,null],[8,null],[8,null],[6,d.NG_VALUE_ACCESSOR]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),t[\"\\u0275prd\"](2048,null,d.NgControl,null,[d.NgModel]),t[\"\\u0275did\"](34,16384,null,0,d.NgControlStatus,[[4,d.NgControl]],null,null),(e()(),t[\"\\u0275eld\"](35,0,null,null,1,\"div\",[[\"class\",\"card-body\"]],null,null,null,null,null)),(e()(),t[\"\\u0275eld\"](36,0,[[1,0],[\"container\",1]],null,0,\"div\",[],null,null,null,null,null)),(e()(),t[\"\\u0275eld\"](37,0,null,null,0,\"div\",[[\"class\",\"card-footer\"]],null,null,null,null,null))],function(e,l){var n=l.component;e(l,3,0),e(l,10,0,n.dropdownselect,!1,\"Visits\"),e(l,21,0,n.startTimeOption,!1),e(l,24,0,n.startTime),e(l,29,0,n.startTimeOption,!1),e(l,32,0,n.endTime)},function(e,l){e(l,17,0,l.component.btnApplyValid),e(l,20,0,t[\"\\u0275nov\"](l,26).ngClassUntouched,t[\"\\u0275nov\"](l,26).ngClassTouched,t[\"\\u0275nov\"](l,26).ngClassPristine,t[\"\\u0275nov\"](l,26).ngClassDirty,t[\"\\u0275nov\"](l,26).ngClassValid,t[\"\\u0275nov\"](l,26).ngClassInvalid,t[\"\\u0275nov\"](l,26).ngClassPending),e(l,28,0,t[\"\\u0275nov\"](l,34).ngClassUntouched,t[\"\\u0275nov\"](l,34).ngClassTouched,t[\"\\u0275nov\"](l,34).ngClassPristine,t[\"\\u0275nov\"](l,34).ngClassDirty,t[\"\\u0275nov\"](l,34).ngClassValid,t[\"\\u0275nov\"](l,34).ngClassInvalid,t[\"\\u0275nov\"](l,34).ngClassPending)})}var M=t[\"\\u0275ccf\"](\"ng-component\",x,function(e){return t[\"\\u0275vid\"](0,[(e()(),t[\"\\u0275eld\"](0,0,null,null,1,\"ng-component\",[],null,null,null,A,k)),t[\"\\u0275did\"](1,114688,null,0,x,[S.l,I.a],null,null)],function(e,l){e(l,1,0)},null)},{},{},[]),E=n(\"CKdr\"),O=n(\"Ip0R\"),T=n(\"ReMC\"),N=n(\"yBdj\"),B={title:\"Code Editors\"},F=function(){},V=n(\"zCE2\"),R=n(\"5NQ/\");n.d(l,\"FootfallHeatMapModuleNgFactory\",function(){return U});var U=t[\"\\u0275cmf\"](o,[],function(e){return t[\"\\u0275mod\"]([t[\"\\u0275mpd\"](512,t.ComponentFactoryResolver,t[\"\\u0275CodegenComponentFactoryResolver\"],[[8,[a.a,M,i.a,E.a]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t[\"\\u0275mpd\"](4608,d[\"\\u0275angular_packages_forms_forms_i\"],d[\"\\u0275angular_packages_forms_forms_i\"],[]),t[\"\\u0275mpd\"](4608,O.NgLocalization,O.NgLocaleLocalization,[t.LOCALE_ID,[2,O[\"\\u0275angular_packages_common_common_a\"]]]),t[\"\\u0275mpd\"](5120,u.BlockUIInstanceService,T.provideInstance,[T.BlockUIModuleSettings]),t[\"\\u0275mpd\"](4608,N.BlockUIService,N.BlockUIService,[u.BlockUIInstanceService]),t[\"\\u0275mpd\"](1073742336,d[\"\\u0275angular_packages_forms_forms_bb\"],d[\"\\u0275angular_packages_forms_forms_bb\"],[]),t[\"\\u0275mpd\"](1073742336,d.FormsModule,d.FormsModule,[]),t[\"\\u0275mpd\"](1073742336,S.p,S.p,[[2,S.v],[2,S.l]]),t[\"\\u0275mpd\"](1073742336,F,F,[]),t[\"\\u0275mpd\"](1073742336,O.CommonModule,O.CommonModule,[]),t[\"\\u0275mpd\"](1073742336,c.b,c.b,[]),t[\"\\u0275mpd\"](1073742336,V.a,V.a,[]),t[\"\\u0275mpd\"](1073742336,R.b,R.b,[]),t[\"\\u0275mpd\"](1073742336,T.BlockUIModule,T.BlockUIModule,[]),t[\"\\u0275mpd\"](1073742336,o,o,[]),t[\"\\u0275mpd\"](1024,S.j,function(){return[[{path:\"\",component:x,data:B}]]},[]),t[\"\\u0275mpd\"](256,T.BlockUIModuleSettings,{},[])])})}}]);","extractedComments":[]}